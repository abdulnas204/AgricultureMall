require([],function(){var e=function(){function e(){return"https:"==window.location.protocol?c:l}function n(n){i.fadeOut("fast"),$("#locale-nag-suggestion").hide(),i.fadeIn("fast"),$("#locale-nag-confirm").show(),$.ajax({type:"POST",url:e(),data:{_nnc:Etsy.csrf_nonce,suggested_currency_code:g.currency.code,suggested_language_code:g.language.code,suggested_region_code:g.region.code,currency_code:r.currency.code,language_code:r.language.code,region_code:r.region.code,geo_ip_country_code:u.geo_ip_country_code},dataType:"json",error:function(){alert("An error occurred while saving your locale preference. Please try again later.")},success:function(){Etsy.EventLogger.logEvent({php_event_name:"dismiss_locale_nag",action:n?"No thanks":"OK"}),setTimeout(function(){n?window.location.reload():i.fadeOut("slow")},3500)}})}function a(e){e.preventDefault();var a="cancel"==e.target.name;return a&&(r=t),n(a)}function o(e){e.preventDefault();var n=$("#locale-nag-message"),a=i.find(":submit[name=save]"),o=i.find(":submit[name=cancel]"),l=$(e.target),c=$("#locale-nag-confirm > h3");s=!s,s?(_||(_=n.html(),d=l.html(),m=a.val(),f=o.val(),h=c.html()),n.html(u.english_nag_message),$("#locale-nag-language").html(r.language.translation),$("#locale-nag-region").html(r.region.translation),a.val("Okay"),o.val("No thanks"),l.html("Show this message in "+r.language.translation),c.html(u.english_confirm_message)):(n.html(_),$("#locale-nag-language").html(r.language.name),$("#locale-nag-region").html(r.region.name),a.val(m),o.val(f),l.html(d),c.html(h))}var l="/api/v2/ajax/locale/preference",c="/api/v2/ajax/locale/preference-secure",t={currency:{code:"USD"},language:{code:"en-US"},region:{code:"XX"}},g=null,r=null,i=null,u={},s=!1,d="",_="",m="",f="",h="";return{init:function(e){u=$.extend(u,e||{}),r=u.locale||t,g=r,i=$("#locale-nag"),i.find(":submit").bind("click",a);var n=$("#locale-nag-language-switch");r.language.code==t.language.code?n.hide():n.bind("click",o),i.fadeIn("fast"),Etsy.EventLogger.logEvent({php_event_name:"view_locale_nag",suggested_language:g.language.code,suggested_currency:g.currency.code,suggested_region:g.region.code,geo_code:u.geo_ip_country_code})}}},n=e(),a=$("#locale-nag-options").html(),o=a?JSON.parse(a):{};n.init(o)});