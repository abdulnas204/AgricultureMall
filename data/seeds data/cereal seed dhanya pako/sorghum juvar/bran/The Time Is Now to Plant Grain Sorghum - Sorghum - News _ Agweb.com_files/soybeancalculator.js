(function(SoyBeanModule,$,undefined){SoyBeanModule.Calculator={givens:['acres_farmed','average_yield','seed_price_per_bag','seed_plant_population','phosphate_unit_cost','phosphate_application_rate','potash_unit_cost','potash_application_rate','lime_year_acre','supplements_per_year','supplements_application_rate','micronutrients_per_year','micronutrients_application_rate','herbicide_preemerge_cost','herbicide_preemerge_application_costs','herbicide_postemerge_cost','herbicide_postemerge_application_costs','insecticide_cost','insecticide_application_cost','fungicide_cost','fungicide_application_cost','loan_value','loan_interest_rate','loan_months_for_repayment','combine_fixed_costs','combine_variable_costs','transportation_fixed_costs','transportation_variable_costs','crop_insurance_acre','misc_cost_acre','labor_hours_acre','labor_wage','land_cost_acre','machinery_fixed_cost','machinery_variable_cost','machinery_fuel','storage_fixed_cost','storage_monthly_interest','storage_months','storage_percent_shrinkage','storage_conditioning','drying_lp_price_gallon','drying_total_gallons','marketing_costs','improvement_yield','improvement_land_costs','improvement_non_land_costs','improvement_price_received','improvement_pct_yield_gain_loss','improvement_pct_non_land_cost_increase_decrease','improvement_pct_price_increase_decrease'],data:{},init:function(){for(i=0;i<this.givens.length;i++){property=this.givens[i];this[property]=this.wrap_data(this,property);}},wrap_data:function(obj,property){return(function(n){if(n){obj.data[property]=n;}
return obj.data[property];});},set:function(param,value){this.data[param]=value;},preharvest_machinery_fixed:function(){return this.machinery_fixed_cost();},preharvest_machinery_variable:function(){return this.machinery_variable_cost();},seed_price_per_acre:function(){return this.seed_price_per_bag()/(140000/this.seed_plant_population());},phosphate_cost_per_acre:function(){return this.phosphate_unit_cost()*this.phosphate_application_rate()/2000;},potash_cost_per_acre:function(){return this.potash_unit_cost()*this.potash_application_rate()/2000;},supplements_cost_per_acre:function(){return this.supplements_per_year()*this.supplements_application_rate()/2000;},micronutrients_cost_per_acre:function(){return this.micronutrients_per_year()*this.micronutrients_application_rate()/2000;},fertilizer_total:function(){return this.phosphate_cost_per_acre()+this.potash_cost_per_acre()+this.lime_year_acre()+this.supplements_cost_per_acre()+this.micronutrients_cost_per_acre();},herbicide_total_cost_per_acre:function(){return this.herbicide_preemerge_cost()+this.herbicide_preemerge_application_costs()+this.herbicide_postemerge_cost()+this.herbicide_postemerge_application_costs();},insecticide_total_cost_per_acre:function(){return this.insecticide_cost()+this.insecticide_application_cost();},fungicide_total_cost_per_acre:function(){return this.fungicide_cost()+this.fungicide_application_cost();},loan_total_interest_cost_per_acre:function(){return(this.loan_months_for_repayment()*(this.loan_value()*this.loan_interest_rate())/(12*this.acres_farmed()));},seed_chemical_total:function(){return this.seed_price_per_acre()+this.fertilizer_total()+this.herbicide_total_cost_per_acre()+this.insecticide_total_cost_per_acre()+this.fungicide_total_cost_per_acre()+this.crop_insurance_acre()+this.misc_cost_acre()+this.loan_total_interest_cost_per_acre();},combine_total_cost:function(){return this.combine_fixed_costs()+this.combine_variable_costs();},transportation_total_cost:function(){return this.transportation_fixed_costs()+this.transportation_variable_costs();},labor_total_cost_acre:function(){return this.labor_hours_acre()*this.labor_wage();},machinery_total_cost_acre:function(){return this.machinery_fixed_cost()+this.machinery_variable_cost()+this.machinery_fuel();},storage_total_cost_acre:function(){return this.storage_fixed_cost()/this.acres_farmed()+this.average_yield()*(this.storage_months()*this.storage_monthly_interest()+this.storage_percent_shrinkage()+this.storage_conditioning());},drying_costs:function(){return this.drying_lp_price_gallon()*this.drying_total_gallons();},machine_variable_cost_total:function(){return this.combine_variable_costs()+this.transportation_variable_costs()+this.storage_total_cost_acre()+this.drying_costs();},machine_fixed_cost_total:function(){return this.combine_fixed_costs()+this.transportation_fixed_costs();},total_fixed_cost_per_acre:function(){return this.machinery_fixed_cost()+this.machine_fixed_cost_total()+this.labor_total_cost_acre()+this.land_cost_acre();},total_variable_cost_per_acre:function(){return this.machinery_variable_cost()+this.machine_variable_cost_total()+this.seed_chemical_total();},total_cost_per_acre:function(){return this.total_fixed_cost_per_acre()+this.total_variable_cost_per_acre();},total_fixed_cost_per_bushel:function(){return this.total_fixed_cost_per_acre()/this.average_yield();},total_variable_cost_per_bushel:function(){return this.total_variable_cost_per_acre()/this.average_yield();},total_cost_per_bushel:function(){return this.total_variable_cost_per_bushel()+this.total_fixed_cost_per_bushel()},total_non_land_cost:function(){return this.total_cost_per_acre()-this.land_cost_acre();},yield_avg:function(){return this.improvement_yield();},yield_imp_cost_yield_price:function(){return this.improvement_yield()*(1+this.improvement_pct_yield_gain_loss());},yield_avg_yield_cost:function(){return this.improvement_yield();},yield_plus:function(){return this.improvement_yield()*(1+this.improvement_pct_yield_gain_loss());},yield_price:function(){return this.improvement_yield();},yield_price_yield:function(){return this.improvement_yield()*(1+this.improvement_pct_yield_gain_loss());},yield_price_cost:function(){return this.improvement_yield();},yield_yield_cost:function(){return this.improvement_yield()*(1+this.improvement_pct_yield_gain_loss());},landpay_avg:function(){return this.improvement_land_costs();},landpay_imp_cost_yield_price:function(){return this.improvement_land_costs();},landpay_avg_yield_cost:function(){return this.improvement_land_costs();},landpay_plus:function(){return this.improvement_land_costs();},landpay_price:function(){return this.improvement_land_costs();},landpay_price_yield:function(){return this.improvement_land_costs();},landpay_price_cost:function(){return this.improvement_land_costs();},landpay_yield_cost:function(){return this.improvement_land_costs();},nonland_avg:function(){return this.improvement_non_land_costs();},nonland_imp_cost_yield_price:function(){return this.improvement_non_land_costs()*(1+this.improvement_pct_non_land_cost_increase_decrease());},nonland_avg_yield_cost:function(){return this.improvement_non_land_costs()*(1+this.improvement_pct_non_land_cost_increase_decrease());},nonland_plus:function(){return this.improvement_non_land_costs();},nonland_price:function(){return this.improvement_non_land_costs();},nonland_price_yield:function(){return this.improvement_non_land_costs();},nonland_price_cost:function(){return this.improvement_non_land_costs()*(1+this.improvement_pct_non_land_cost_increase_decrease());},nonland_yield_cost:function(){return this.improvement_non_land_costs()*(1+this.improvement_pct_non_land_cost_increase_decrease());},price_avg:function(){return this.improvement_price_received();},price_imp_cost_yield_price:function(){return this.improvement_price_received()*(1+this.improvement_pct_price_increase_decrease());},price_avg_yield_cost:function(){return this.improvement_price_received();},price_plus:function(){return this.improvement_price_received();},price_price:function(){return this.improvement_price_received()*(1+this.improvement_pct_price_increase_decrease());},price_price_yield:function(){return this.improvement_price_received()*(1+this.improvement_pct_price_increase_decrease());},price_price_cost:function(){return this.improvement_price_received()*(1+this.improvement_pct_price_increase_decrease());},price_yield_cost:function(){return this.improvement_price_received();},gross_avg:function(){return this.yield_avg()*this.price_avg();},gross_imp_cost_yield_price:function(){return this.yield_imp_cost_yield_price()*this.price_imp_cost_yield_price();},gross_avg_yield_cost:function(){return this.yield_avg_yield_cost()*this.price_avg_yield_cost();},gross_plus:function(){return this.yield_plus()*this.price_plus();},gross_price:function(){return this.yield_price()*this.price_price();},gross_price_yield:function(){return this.yield_price_yield()*this.price_price_yield();},gross_price_cost:function(){return this.yield_price_cost()*this.price_price_cost();},gross_yield_cost:function(){return this.yield_yield_cost()*this.price_yield_cost();},netret_avg:function(){return this.gross_avg()-this.nonland_avg()-this.landpay_avg();},netret_imp_cost_yield_price:function(){return this.gross_imp_cost_yield_price()-this.nonland_imp_cost_yield_price()-this.landpay_imp_cost_yield_price();},netret_avg_yield_cost:function(){return this.gross_avg_yield_cost()-this.nonland_avg_yield_cost()-this.landpay_avg_yield_cost();},netret_plus:function(){return this.gross_plus()-this.nonland_plus()-this.landpay_plus();},netret_price:function(){return this.gross_price()-this.nonland_price()-this.landpay_price();},netret_price_yield:function(){return this.gross_price_yield()-this.nonland_price_yield()-this.landpay_price_yield();},netret_price_cost:function(){return this.gross_price_cost()-this.nonland_price_cost()-this.landpay_price_cost();},netret_yield_cost:function(){return this.gross_yield_cost()-this.nonland_yield_cost()-this.landpay_yield_cost();},netimp_avg:function(){return null;},netimp_imp_cost_yield_price:function(){return this.netret_imp_cost_yield_price()-this.netret_avg()},netimp_avg_yield_cost:function(){return this.netret_avg_yield_cost()-this.netret_avg()},netimp_plus:function(){return this.netret_plus()-this.netret_avg()},netimp_price:function(){return this.netret_price()-this.netret_avg()},netimp_price_yield:function(){return this.netret_price_yield()-this.netret_avg()},netimp_price_cost:function(){return this.netret_price_cost()-this.netret_avg()},netimp_yield_cost:function(){return this.netret_yield_cost()-this.netret_avg()},cumimp_avg:function(){return null;},cumimp_imp_cost_yield_price:function(){return this.netimp_imp_cost_yield_price()/this.netret_avg()},cumimp_avg_yield_cost:function(){return this.netimp_avg_yield_cost()/this.netret_avg()},cumimp_plus:function(){return this.netimp_plus()/this.netret_avg()},cumimp_price:function(){return this.netimp_price()/this.netret_avg()},cumimp_price_yield:function(){return this.netimp_price_yield()/this.netret_avg()},cumimp_price_cost:function(){return this.netimp_price_cost()/this.netret_avg()},cumimp_yield_cost:function(){return this.netimp_yield_cost()/this.netret_avg()},normalize_numbers:function(d){for(var i in d){d[i]=this.normalize_number(d[i])}
return d;},normalize_number:function(s){var factor=1;if(0<=s.search(/%/)){factor=0.01;s=s.replace(/%/g,'');}
s=s.replace(/[\$,]/g,'');n=factor*parseFloat(s);if(isNaN(n)){n=0};return n;}}
SoyBeanModule.CalculateCosts=function(ClientID){var data={};$(document).find("[id^='"+ClientID+"_input_calc_soy']").each(function(){data[this.id.replace(ClientID+'_input_calc_soy_','')]=this.value;});data=SoyBeanModule.Calculator.normalize_numbers(data);for(var i in data){SoyBeanModule.Calculator.set(i,data[i]);}
var format=function(n){return'$'+n.toFixed(2)};$('#'+ClientID+'_calc_soy_preharvest_machinery_fixed').text(format(SoyBeanModule.Calculator.preharvest_machinery_fixed()));$('#'+ClientID+'_calc_soy_preharvest_machinery_variable').text(format(SoyBeanModule.Calculator.preharvest_machinery_variable()));$('#'+ClientID+'_calc_soy_seed_plant_population_2').text(format(SoyBeanModule.Calculator.seed_plant_population()));$('#'+ClientID+'_calc_soy_seed_price_per_acre').text(format(SoyBeanModule.Calculator.seed_price_per_acre()));$("#"+ClientID+"_calc_soy_fertilizer_total_per_acre").text(format(SoyBeanModule.Calculator.fertilizer_total()));$("#"+ClientID+"_calc_soy_herbicide_total_cost_per_acre").text(format(SoyBeanModule.Calculator.herbicide_total_cost_per_acre()));$("#"+ClientID+"_calc_soy_insecticide_total_cost_per_acre").text(format(SoyBeanModule.Calculator.insecticide_total_cost_per_acre()));$("#"+ClientID+"_calc_soy_fungicide_total_cost_per_acre").text(format(SoyBeanModule.Calculator.fungicide_total_cost_per_acre()));$("#"+ClientID+"_calc_soy_insurance_total_cost_per_acre").text(format(SoyBeanModule.Calculator.crop_insurance_acre()));$("#"+ClientID+"_calc_soy_misc_total_cost_per_acre").text(format(SoyBeanModule.Calculator.misc_cost_acre()));$("#"+ClientID+"_calc_soy_loan_total_interest_cost_per_acre").text(format(SoyBeanModule.Calculator.loan_total_interest_cost_per_acre()));$("#"+ClientID+"_calc_soy_seed_chemical_total").text(format(SoyBeanModule.Calculator.seed_chemical_total()));$("#"+ClientID+"_calc_soy_combine_fixed_costs_2").text(format(SoyBeanModule.Calculator.combine_fixed_costs()));$("#"+ClientID+"_calc_soy_combine_variable_costs_2").text(format(SoyBeanModule.Calculator.combine_variable_costs()));$("#"+ClientID+"_calc_soy_transportation_fixed_costs_2").text(format(SoyBeanModule.Calculator.transportation_fixed_costs()));$("#"+ClientID+"_calc_soy_transportation_variable_costs_2").text(format(SoyBeanModule.Calculator.transportation_variable_costs()));$("#"+ClientID+"_calc_soy_storage_total_cost_acre").text(format(SoyBeanModule.Calculator.storage_total_cost_acre()));$("#"+ClientID+"_calc_soy_drying_costs").text(format(SoyBeanModule.Calculator.drying_costs()));$("#"+ClientID+"_calc_soy_machine_fixed_cost_total").text(format(SoyBeanModule.Calculator.machine_fixed_cost_total()));$("#"+ClientID+"_calc_soy_machine_variable_cost_total").text(format(SoyBeanModule.Calculator.machine_variable_cost_total()));$("#"+ClientID+"_calc_soy_marketing_costs_2").text(format(SoyBeanModule.Calculator.marketing_costs()));$("#"+ClientID+"_calc_soy_labor_total_cost_acre").text(format(SoyBeanModule.Calculator.labor_total_cost_acre()));$("#"+ClientID+"_calc_soy_land_cost_acre_2").text(format(SoyBeanModule.Calculator.land_cost_acre()));$("#"+ClientID+"_calc_soy_total_fixed_cost_per_acre").text(format(SoyBeanModule.Calculator.total_fixed_cost_per_acre()));$("#"+ClientID+"_calc_soy_total_variable_cost_per_acre").text(format(SoyBeanModule.Calculator.total_variable_cost_per_acre()));$("#"+ClientID+"_calc_soy_total_fixed_cost_per_bushel").text(format(SoyBeanModule.Calculator.total_fixed_cost_per_bushel()));$("#"+ClientID+"_calc_soy_total_variable_cost_per_bushel").text(format(SoyBeanModule.Calculator.total_variable_cost_per_bushel()));$('#'+ClientID+'_calc_soy_total_cost_per_acre').text(format(SoyBeanModule.Calculator.total_cost_per_acre()));$('#'+ClientID+'_calc_soy_total_cost_per_bushel').text(format(SoyBeanModule.Calculator.total_cost_per_bushel()));$("#"+ClientID+"_data_calc_soy_improvement_yield").val(SoyBeanModule.Calculator.average_yield());$("#"+ClientID+"_data_calc_soy_improvement_land_costs").val(format(SoyBeanModule.Calculator.land_cost_acre()));$("#"+ClientID+"_data_calc_soy_improvement_non_land_costs").val(format(SoyBeanModule.Calculator.total_non_land_cost()));}
SoyBeanModule.CalculateMarginResults=function(ClientID){var data={};$(document).find("[id^='"+ClientID+"_data_calc_soy']").each(function(){data[this.id.replace(ClientID+'_data_calc_soy_','')]=this.value;});data=SoyBeanModule.Calculator.normalize_numbers(data);for(var i in data){SoyBeanModule.Calculator.set(i,data[i]);}
$('#calc-margins-results tr').each(function(){var row_prefix=this.id.replace('improvement_','');var formats={yield:function(n){return n.toFixed(0);},landpay:function(n){return'$'+n.toFixed(2);},nonland:function(n){return'$'+n.toFixed(2);},price:function(n){return'$'+n.toFixed(2);},gross:function(n){return'$'+n.toFixed(2);},netret:function(n){return'$'+n.toFixed(2);},netimp:function(n){return'$'+n.toFixed(2);},cumimp:function(n){n=n*100;return n.toFixed(2)+'%';}}
$(this).find('td').each(function(){if(!this.className){return;}
f=row_prefix+'_'+this.className.replace(/-/g,'_');f=f.replace(ClientID+row_prefix+'_','');format=formats[row_prefix]
$(this).find("[id$='"+ClientID+"_"+row_prefix+"_"+this.className.replace(/-/g,'_')+"']").text(format(SoyBeanModule.Calculator[f]()));});});}
SoyBeanModule.init=function(){SoyBeanModule.Calculator.init();var $tabs=$("#tabs").tabs();$tabs.tabs("option","active",window["iTabIndex"]);switch(window["iTabIndex"]){case 1:SoyBeanModule.CalculateCosts(window["ClientID"]);break;case 3:SoyBeanModule.CalculateMarginResults(window["ClientID"]);}}}(window.SoyBeanModule=window.SoyBeanModule||{},jQuery));jQuery(function($){SoyBeanModule.init();BaseModule.addModuleRebindFunction("SoyBeanModule",SoyBeanModule.init);});